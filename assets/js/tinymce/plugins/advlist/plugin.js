!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(t,e,n)=>{const r="UL"===e?"InsertUnorderedList":"InsertOrderedList";t.execCommand(r,!1,!1===n?null:{"list-style-type":n})},n=t=>e=>e.options.get(t),r=n("advlist_number_styles"),s=n("advlist_bullet_styles"),l=t=>null==t,i=t=>!l(t);var o=tinymce.util.Tools.resolve("tinymce.util.Tools");class Optional{constructor(t,e){this.tag=t,this.value=e}static some(t){return new Optional(!0,t)}static none(){return Optional.singletonNone}fold(t,e){return this.tag?e(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?Optional.some(t(this.value)):Optional.none()}bind(t){return this.tag?t(this.value):Optional.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:Optional.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(null!=t?t:"Called getOrDie on None")}static from(t){return i(t)?Optional.some(t):Optional.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Optional.singletonNone=new Optional(!1);const a=t=>i(t)&&/^(TH|TD)$/.test(t.nodeName),u=t=>l(t)||"default"===t?"":t,d=(t,e,n)=>{const r=((t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n]))return n;return-1})(e.parents,a),s=-1!==r?e.parents.slice(0,r):e.parents,l=o.grep(s,(t=>e=>i(e)&&/^(OL|UL|DL)$/.test(e.nodeName)&&((t,e)=>t.dom.isChildOf(e,t.getBody()))(t,e))(t));return l.length>0&&l[0].nodeName===n},g=(t,e)=>n=>{const r=r=>{n.setActive(d(t,r,e)),n.setEnabled(!((t,e)=>{const n=t.dom.getParent(e,"ol,ul,dl");return((t,e)=>null!==e&&"false"===t.dom.getContentEditableParent(e))(t,n)})(t,r.element))};return t.on("NodeChange",r),()=>t.off("NodeChange",r)},h=(t,n,r,s,l,i)=>{t.ui.registry.addSplitButton(n,{tooltip:r,icon:"OL"===l?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:t=>{t(o.map(i,(t=>{const e="OL"===l?"num":"bull",n="disc"===t||"decimal"===t?"default":t,r=u(t),s=(t=>t.replace(/\-/g," ").replace(/\b\w/g,(t=>t.toUpperCase())))(t);return{type:"choiceitem",value:r,icon:"list-"+e+"-"+n,text:s}})))},onAction:()=>t.execCommand(s),onItemAction:(n,r)=>{e(t,l,r)},select:e=>{const n=(t=>{const e=t.dom.getParent(t.selection.getNode(),"ol,ul"),n=t.dom.getStyle(e,"listStyleType");return Optional.from(n)})(t);return n.map((t=>e===t)).getOr(!1)},onSetup:g(t,l)})},p=(t,n,r,s,l,i)=>{i.length>1?h(t,n,r,s,l,i):((t,n,r,s,l,i)=>{t.ui.registry.addToggleButton(n,{active:!1,tooltip:r,icon:"OL"===l?"ordered-list":"unordered-list",onSetup:g(t,l),onAction:()=>t.queryCommandState(s)||""===i?t.execCommand(s):e(t,l,i)})})(t,n,r,s,l,u(i[0]))};t.add("advlist",(t=>{t.hasPlugin("lists")?((t=>{const e=t.options.register;e("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),e("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})})(t),(t=>{p(t,"numlist","Numbered list","InsertOrderedList","OL",r(t)),p(t,"bullist","Bullet list","InsertUnorderedList","UL",s(t))})(t),(t=>{t.addCommand("ApplyUnorderedListStyle",((n,r)=>{e(t,"UL",r["list-style-type"])})),t.addCommand("ApplyOrderedListStyle",((n,r)=>{e(t,"OL",r["list-style-type"])}))})(t)):console.error("Please use the Lists plugin together with the Advanced List plugin.")}))}();