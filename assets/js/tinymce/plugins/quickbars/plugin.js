!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=t=>e=>typeof e===t,o=(n="string",t=>(t=>{const e=typeof t;return null===t?"null":"object"===e&&Array.isArray(t)?"array":"object"===e&&(o=n=t,(r=String).prototype.isPrototypeOf(o)||(null===(i=n.constructor)||void 0===i?void 0:i.name)===r.name)?"string":e;var o,n,r,i})(t)===n);var n;const r=e("boolean"),i=e("function"),s=t=>e=>e.options.get(t),a=s("quickbars_selection_toolbar"),l=s("quickbars_insert_toolbar"),c=s("quickbars_image_toolbar");let u=0;const d=(t,e,o)=>{const n=t.editorUpload.blobCache,r=n.create((t=>{const e=(new Date).getTime(),o=Math.floor(1e9*Math.random());return u++,t+"_"+o+u+String(e)})("mceu"),o,e);n.add(r),t.insertContent(t.dom.createHTML("img",{src:r.blobUri()}))};var m=tinymce.util.Tools.resolve("tinymce.Env"),h=tinymce.util.Tools.resolve("tinymce.util.Delay");const g=t=>{t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{(t=>new Promise((e=>{const o=document.createElement("input");o.type="file",o.accept="image/*",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.opacity="0.001",document.body.appendChild(o),o.addEventListener("change",(t=>{e(Array.prototype.slice.call(t.target.files))}));const n=r=>{const i=()=>{var t;e([]),null===(t=o.parentNode)||void 0===t||t.removeChild(o)};m.os.isAndroid()&&"remove"!==r.type?h.setEditorTimeout(t,i,0):i(),t.off("focusin remove",n)};t.on("focusin remove",n),o.click()})))(t).then((e=>{if(e.length>0){const o=e[0];(t=>new Promise((e=>{const o=new FileReader;o.onloadend=()=>{e(o.result.split(",")[1])},o.readAsDataURL(t)})))(o).then((e=>{d(t,e,o)}))}}))}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{((t,e,o)=>{t.execCommand("mceInsertTable",!1,{rows:o,columns:e})})(t,2,2)}})},p=(f=!1,()=>f);var f;class Optional{constructor(t,e){this.tag=t,this.value=e}static some(t){return new Optional(!0,t)}static none(){return Optional.singletonNone}fold(t,e){return this.tag?e(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?Optional.some(t(this.value)):Optional.none()}bind(t){return this.tag?t(this.value):Optional.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:Optional.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(null!=t?t:"Called getOrDie on None")}static from(t){return(t=>null==t)(t)?Optional.none():Optional.some(t)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Optional.singletonNone=new Optional(!1);var v=(t,e,o,n,r)=>t(o,n)?Optional.some(o):i(r)&&r(o)?Optional.none():e(o,n,r);const b=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},y={fromHtml:(t,e)=>{const o=(e||document).createElement("div");if(o.innerHTML=t,!o.hasChildNodes()||o.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,t),new Error(e)}return b(o.childNodes[0])},fromTag:(t,e)=>{const o=(e||document).createElement(t);return b(o)},fromText:(t,e)=>{const o=(e||document).createTextNode(t);return b(o)},fromDom:b,fromPoint:(t,e,o)=>Optional.from(t.dom.elementFromPoint(e,o)).map(b)},k=(t,e)=>{const o=t.dom;if(1!==o.nodeType)return!1;{const t=o;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const w=(t,e,o)=>{let n=t.dom;const r=i(o)?o:p;for(;n.parentNode;){n=n.parentNode;const t=y.fromDom(n);if(e(t))return Optional.some(t);if(r(t))break}return Optional.none()},O=(t,e,o)=>w(t,(t=>k(t,e)),o),T=t=>{const e=l(t);e.length>0&&t.ui.registry.addContextToolbar("quickblock",{predicate:e=>{const o=y.fromDom(e),n=t.schema.getTextBlockElements(),r=e=>e.dom===t.getBody();return((t,e,o)=>v(((t,e)=>k(t,e)),O,t,e,o))(o,"table",r).fold((()=>((t,e,o)=>v(((t,e)=>e(t)),w,t,e,o))(o,(e=>e.dom.nodeName.toLowerCase()in n&&t.dom.isEmpty(e.dom)),r).isSome()),p)},items:e,position:"line",scope:"editor"})},N=t=>{const e=t=>"IMG"===t.nodeName||"FIGURE"===t.nodeName&&/image/i.test(t.className),o=c(t);o.length>0&&t.ui.registry.addContextToolbar("imageselection",{predicate:e,items:o,position:"node"});const n=a(t);n.length>0&&t.ui.registry.addContextToolbar("textselection",{predicate:o=>!e(o)&&!t.selection.isCollapsed()&&(e=>"false"!==t.dom.getContentEditableParent(e))(o),items:n,position:"selection",scope:"editor"})};t.add("quickbars",(t=>{(t=>{const e=t.options.register,n=t=>e=>{const n=r(e)||o(e);return n?r(e)?{value:e?t:"",valid:n}:{value:e.trim(),valid:n}:{valid:!1,message:"Must be a boolean or string."}},i="bold italic | quicklink h2 h3 blockquote";e("quickbars_selection_toolbar",{processor:n(i),default:i});const s="quickimage quicktable";e("quickbars_insert_toolbar",{processor:n(s),default:s});const a="alignleft aligncenter alignright";e("quickbars_image_toolbar",{processor:n(a),default:a})})(t),g(t),T(t),N(t)}))}();