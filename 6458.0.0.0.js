"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6458],{67853:(e,t,i)=>{function n(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function s(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}function r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}i.d(t,{_:()=>s,a:()=>r,b:()=>n})},66458:(e,t,i)=>{i.r(t),i.d(t,{default:()=>RichTextField});var n=i(67853),s=i(95899),r=i(14041),l=i(30936),o=i(31085);const a=["label","className","formatter","value","error","errorMessage"],{richText:u}=l.Wp.storage;u.set({full:{plugins:"code link lists table fullscreen image media",toolbar:"undo redo image media | styleselect | bold italic underline strikethrough |link superscript subscript | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | table | code fullscreen"},default:{plugins:"lists code link table fullscreen",toolbar:"undo redo | styleselect | bold italic underline strikethrough | link superscript subscript | numlist bullist | alignleft aligncenter alignright alignjustify | outdent indent | table | code fullscreen"},compact:{menubar:!1,plugins:"lists code link fullscreen",toolbar:"undo redo | styleselect | bold italic underline strikethrough | link superscript subscript | numlist bullist | alignleft aligncenter alignright alignjustify | outdent indent | code fullscreen"},basic:{menubar:!1,plugins:"lists link fullscreen",toolbar:"bold italic underline | alignleft aligncenter alignright | numlist bullist | link fullscreen"}});class RichTextField extends r.Component{constructor(){super(),this.state={value:"",focused:!1,hasChanged:!1},this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleOnChange=this.handleOnChange.bind(this),this.editorRef=r.createRef()}handleOnChange(e){const t=this.editor.getContent(),i=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}(t);this.setState({value:t,hasChanged:!0});const{onChange:n}=this.props;n&&n({value:i&&t})}componentWillUnmount(){this.editor&&this.editor.remove()}componentDidMount(){const{onInit:e,onSetup:t}=this.props;if(this.props.value&&this.setState({value:this.props.value}),!window.tinymce)throw"tinymce not found please load tinymce js from cdn or locally";window.tinymce.init(Object.assign({target:this.editorRef.current,branding:!1,promotion:!1},u.get()[this.props.editorStyle]||{},this.props.editorOptions,{setup:i=>{this.editor=i,i.on("Change",this.handleOnChange),i.setContent(this.props.value),i.on("init",(function(t){e&&e(i)})),t&&t(i),Object.keys(this.props.events||{}).forEach((e=>{i.on(e,this.props.events[e])}))}}))}componentDidUpdate(e){this.state.focused||e.value===this.props.value||this.state.value===this.props.value||(this.setState({value:this.props.value}),this.editor.setContent(this.props.value||""))}handleFocus(){this.setState({focused:!0})}handleBlur(){this.props,this.setState({focused:!1})}render(){const{focused:e}=this.state,t=this.props,{label:i,className:s="",value:r,error:l,errorMessage:u}=t;return(0,n._)(t,a),(0,o.jsxs)("div",{className:`sq-richtext-field${e?" sq-richtext-field--focused":""} ${s}`,children:[i&&(0,o.jsx)("label",{htmlFor:"",children:i}),(0,o.jsx)("div",{children:(0,o.jsx)("textarea",{ref:this.editorRef,children:r})}),!e&&l&&(0,o.jsx)("div",{className:"sq-textarea-field--error",children:u})]})}}RichTextField.propTypes={errorMessage:s.P.string,className:s.P.string,value:s.P.any,editorStyle:s.P.string,formatter:s.P.object,onChange:s.P.func,onKeyPress:s.P.func,onBlur:s.P.func},RichTextField.defaultProps={editorStyle:"default"}}}]);