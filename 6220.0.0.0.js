"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6220],{60474:(t,e,n)=>{n.d(e,{a:()=>b,b:()=>f,c:()=>K,r:()=>v});var r,s,o=n(95899),i=n(86445),a=n(60947),c=n(49494),l=o.b,u=o.u.RegExp,d=l((function(){var t=u("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),p=d||l((function(){return!u("a","y").sticky})),f={BROKEN_CARET:d||l((function(){var t=u("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:p,UNSUPPORTED_Y:d},h=o.b,g=o.u.RegExp,v=h((function(){var t=g(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),m=o.b,y=o.u.RegExp,b=m((function(){var t=y("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),x=o.c,O=o.f,A=i.t,j=a.r,I=f,C=o.I.exports,P=c.o,S=o.A.get,F=v,T=b,R=C("native-string-replace",String.prototype.replace),k=RegExp.prototype.exec,E=k,L=O("".charAt),_=O("".indexOf),w=O("".replace),N=O("".slice),D=(s=/b*/g,x(k,r=/a/,"a"),x(k,s,"a"),0!==r.lastIndex||0!==s.lastIndex),M=I.BROKEN_CARET,G=void 0!==/()??/.exec("")[1];(D||G||M||F||T)&&(E=function(t){var e,n,r,s,o,i,a,c=this,l=S(c),u=A(t),d=l.raw;if(d)return d.lastIndex=c.lastIndex,e=x(E,d,u),c.lastIndex=d.lastIndex,e;var p=l.groups,f=M&&c.sticky,h=x(j,c),g=c.source,v=0,m=u;if(f&&(h=w(h,"y",""),-1===_(h,"g")&&(h+="g"),m=N(u,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==L(u,c.lastIndex-1))&&(g="(?: "+g+")",m=" "+m,v++),n=new RegExp("^(?:"+g+")",h)),G&&(n=new RegExp("^"+g+"$(?!\\s)",h)),D&&(r=c.lastIndex),s=x(k,f?n:c,m),f?s?(s.input=N(s.input,v),s[0]=N(s[0],v),s.index=c.lastIndex,c.lastIndex+=s[0].length):c.lastIndex=0:D&&s&&(c.lastIndex=c.global?s.index+s[0].length:r),G&&s&&s.length>1&&x(R,s[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(s[o]=void 0)})),s&&p)for(s.groups=i=P(null),o=0;o<p.length;o++)i[(a=p[o])[0]]=s[a[1]];return s});var K=E,$=o._;$({target:"RegExp",proto:!0,forced:/./.exec!==K},{exec:K})},38892:(t,e,n)=>{var r=n(95899),s=n(68318),o=n(86445),i=r.c,a=s.f,c=r.d,l=r.h,u=r.k,d=o.t,p=r.r,f=r.m,h=s.a,g=s.r;a("match",(function(t,e,n){return[function(e){var n=p(this),r=l(e)?void 0:f(e,t);return r?i(r,e,n):new RegExp(e)[t](d(n))},function(t){var r=c(this),s=d(t),o=n(e,r,s);if(o.done)return o.value;if(!r.global)return g(r,s);var i=r.unicode;r.lastIndex=0;for(var a,l=[],p=0;null!==(a=g(r,s));){var f=d(a[0]);l[p]=f,""===f&&(r.lastIndex=h(s,u(r.lastIndex),i)),p++}return 0===p?null:l}]}))},66220:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Form});var r=n(95899),s=(n(67588),n(60474),n(38892),n(66327)),o=n(31085),i=n(14041),a=n(30936);n(49494),n(62614),n(16276),n(86445),n(44105),n(60947),n(68318),n(17436);const{storage:c,appEvents:l}=a.Wp,{events:u}=l,{Validator:d}=a.Wp.validator;class Form extends i.Component{constructor(t){super(t),this.state={data:{},validated:!1,lastAction:null,errorId:""},this.form_onKeyPress=this.form_onKeyPress.bind(this),this.onClick=this.onClick.bind(this),this.onFirstFailed=this.onFirstFailed.bind(this)}componentDidMount(){u.subscribe("onFirstFieldFailed",this.onFirstFailed)}componentWillUnmount(){u.unsubscribe("onFirstFieldFailed",this.onFirstFailed)}form_onKeyPress(t){if(!1!==this.props.submitOnEnter&&"Enter"===t.key){t.stopPropagation();const{defaultAction:e=this.props.actions&&this.props.actions[0]}=this.props;setTimeout((()=>e&&this.handleAction(t,e))),this.setState({lastAction:e})}}onFirstFailed(t,e,n){this.setState({errorId:`${n.name}_${e}`}),setTimeout((()=>{this.setState({errorId:""})}),200)}componentDidUpdate(t){this.props.value!==t.value&&this.setState({data:Object.assign({},this.props.value)})}onClick(t,e,n){const{onClick:r}=this.props,{onClick:s}=e;r&&r(t,e,n),s&&s(t,e,n)}onChange(t,e,n){const{onChange:r,onFieldChange:s}=this.props,o=Object.assign(Object.assign(Object.assign({},this.state.data),this.props.value),{[t.name]:e.value});this.setState({data:Object.assign(Object.assign({},this.state.data),{[t.name]:e.value})}),this.setState({errorId:""}),r&&r({value:o,orignField:e.orignField||t,formTrace:e.formTrace&&"Form"===t.cmpType?[t,...e.formTrace]:[]},t,n),s&&s(Object.assign({},e),t,n)}render(){const{className:t="",fields:e=[],value:n={},actions:r=[],errors:s={},actionConfig:i={}}=this.props;return(0,o.jsxs)("div",{className:`sq-form ${t}`,onKeyPress:this.form_onKeyPress,children:[(0,o.jsx)("div",{className:"sq-form_fields",children:e.map(((t,e)=>this.renderComp(t,n[t.name],s[t.name],n,e)))}),r.length>0&&(0,o.jsx)("div",{className:`sq-form_actions ${i.className||""}`,children:r.map(((t,e)=>this.renderAction(t,e,i)))})]})}renderComp(t,e,n,r,i){const{onAnalytics:l,disabled:u,userData:p={}}=this.props,{ErrorBoundry:f}=a.Wp.storage.components.get(),{cmpType:h,containerClass:g="",beforeRender:v}=t,m=(0,s._)(t,["cmpType","containerClass","beforeRender"]),y=c.components.get(),b=y[h]||y.Input;let x=Object.assign({},m),O=!0;if(t.match){const e=new d(t.match);e.setValues(Object.assign(Object.assign({},p),r)),O=e.validateAll()}if(O&&"function"==typeof v){const n=v(t,e,Object.assign(Object.assign({},p),r));if(!1===n)O=n;else{const{isRender:t}=n,e=(0,s._)(n,["isRender"]);O=!(!1===t),x=Object.assign(Object.assign({},x),e)}}return O&&(0,o.jsx)("div",{className:`sq-form__field ${g}`,children:(0,o.jsx)(f,{children:(0,o.jsx)(b,Object.assign({disabled:u,doFocus:this.state.errorId===`${this.props.name}_${t.name}`},x,{value:e,row:r,userData:p,onClick:e=>{this.onClick(e,t,r)},onAction:(t,e)=>{this.handleAction(t,e)},onChange:e=>this.onChange(t,e,r),onKeyPress:e=>this.handleOnKeyPress(t,e,r),onAnalytics:l},n))})},i)}handleAction(t,e){const{onAction:n,value:r}=this.props;this.setState({errorId:""}),n&&n(Object.assign(Object.assign({},r),this.state.data),e)}handleOnKeyPress(t,e,n){const{onFieldKeyPress:r}=this.props;this.setState({errorId:""}),r&&r(Object.assign({},e),t,n)}renderAction(t,e,n){const{onAnalytics:r,row:a}=this.props,{cmpType:l,actionType:u,className:d,actionClassName:p="",beforeRender:f}=t,h=(0,s._)(t,["cmpType","actionType","className","actionClassName","beforeRender"]),g=c.components.get(),v=f&&f(t,a),m=g[l]||g.Button;return(0,o.jsx)(i.Fragment,{children:!1!==v?(0,o.jsx)("div",{className:`sq-form__action ${p}`,children:(0,o.jsx)(m,Object.assign({className:d},h,{onClick:e=>{this.state.lastAction===t?this.setState({lastAction:null}):this.handleAction(e,t)},onAnalytics:r}),e)}):(0,o.jsx)(o.Fragment,{})},`sq-fa-${e}`)}}Form.propTypes={defaultAction:r.P.object,value:r.P.object,errors:r.P.object,userData:r.P.object,fields:r.P.array,actions:r.P.array,onClick:r.P.func,onChange:r.P.func,onFieldChange:r.P.func,onFieldKeyPress:r.P.func,onAction:r.P.func,onValidate:r.P.func,errorMessage:r.P.func}},49494:(t,e,n)=>{n.d(e,{o:()=>S});var r=n(95899),s=n(62614),o={},i=r.s,a=r.Y,c=r.p,l=r.d,u=r.F,d=r.Z;o.f=i&&!a?Object.defineProperties:function(t,e){l(t);for(var n,r=u(e),s=d(e),o=s.length,i=0;o>i;)c.f(t,n=s[i++],r[n]);return t};var p,f=r.d,h=o,g=r.$,v=r.a0,m=s.af,y=r.G,b=r.C,x="prototype",O="script",A=b("IE_PROTO"),j=function(){},I=function(t){return"<"+O+">"+t+"</"+O+">"},C=function(t){t.write(I("")),t.close();var e=t.parentWindow.Object;return t=null,e},P=function(){try{p=new ActiveXObject("htmlfile")}catch(s){}var t,e,n;P="undefined"!=typeof document?document.domain&&p?C(p):(e=y("iframe"),n="java"+O+":",e.style.display="none",m.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(I("document.F=Object")),t.close(),t.F):C(p);for(var r=g.length;r--;)delete P[x][g[r]];return P()};v[A]=!0;var S=Object.create||function(t,e){var n;return null!==t?(j[x]=f(t),n=new j,j[x]=null,n[A]=t):n=P(),void 0===e?n:h.f(n,e)}},68318:(t,e,n)=>{n.d(e,{a:()=>C,f:()=>g,r:()=>E});var r=n(60474),s=n(17436),o=n(95899),i=n(86445),a=s.f,c=o.x,l=r.c,u=o.b,d=o.w,p=o.y,f=d("species"),h=RegExp.prototype,g=function(t,e,n,r){var s=d(t),o=!u((function(){var e={};return e[s]=function(){return 7},7!=""[t](e)})),i=o&&!u((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[f]=function(){return n},n.flags="",n[s]=/./[s]),n.exec=function(){return e=!0,null},n[s](""),!e}));if(!o||!i||n){var g=a(/./[s]),v=e(s,""[t],(function(t,e,n,r,s){var i=a(t),c=e.exec;return c===l||c===h.exec?o&&!s?{done:!0,value:g(e,n,r)}:{done:!0,value:i(n,e,r)}:{done:!1}}));c(String.prototype,t,v[0]),c(h,s,v[1])}r&&p(h[s],"sham",!0)},v=o.f,m=o.j,y=i.t,b=o.r,x=v("".charAt),O=v("".charCodeAt),A=v("".slice),j=function(t){return function(e,n){var r,s,o=y(b(e)),i=m(n),a=o.length;return i<0||i>=a?t?"":void 0:(r=O(o,i))<55296||r>56319||i+1===a||(s=O(o,i+1))<56320||s>57343?t?x(o,i):r:t?A(o,i,i+2):s-56320+(r-55296<<10)+65536}},I={codeAt:j(!1),charAt:j(!0)}.charAt,C=function(t,e,n){return e+(n?I(t,e).length:1)},P=o.c,S=o.d,F=o.n,T=o.X,R=r.c,k=TypeError,E=function(t,e){var n=t.exec;if(F(n)){var r=P(n,t,e);return null!==r&&S(r),r}if("RegExp"===T(t))return P(R,t,e);throw k("RegExp#exec called on incompatible receiver")}},67588:(t,e,n)=>{var r=n(95899),s=n(49494),o=n(62614),i=r.w,a=s.o,c=r.p.f,l=i("unscopables"),u=Array.prototype;null==u[l]&&c(u,l,{configurable:!0,value:a(null)});var d,p,f,h=!(0,r.b)((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),g=r.B,v=r.n,m=r.t,y=h,b=(0,r.C)("IE_PROTO"),x=Object,O=x.prototype,A=y?x.getPrototypeOf:function(t){var e=m(t);if(g(e,b))return e[b];var n=e.constructor;return v(n)&&e instanceof n?n.prototype:e instanceof x?O:null},j=r.b,I=r.n,C=r.o,P=A,S=r.x,F=(0,r.w)("iterator"),T=!1;[].keys&&("next"in(f=[].keys())?(p=P(P(f)))!==Object.prototype&&(d=p):T=!0),(!C(d)||j((function(){var t={};return d[F].call(t)!==t})))&&(d={}),I(d[F])||S(d,F,(function(){return this}));var R={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:T},k=R.IteratorPrototype,E=s.o,L=r.D,_=o.j,w=o.k,N=function(){return this},D=r._,M=r.c,G=r.E,K=r.n,$=function(t,e,n,r){var s=e+" Iterator";return t.prototype=E(k,{next:L(+!r,n)}),_(t,s,!1),w[s]=N,t},V=A,B=o.o,q=o.j,U=r.y,W=r.x,Y=r.w,H=o.k,X=R,Z=G.PROPER,z=G.CONFIGURABLE,J=X.IteratorPrototype,Q=X.BUGGY_SAFARI_ITERATORS,tt=Y("iterator"),et="keys",nt="values",rt="entries",st=function(){return this},ot=r.F,it=function(t){u[l][t]=!0},at=o.k,ct=r.A,lt=r.p.f,ut=function(t,e,n,r,s,o,i){$(n,e,r);var a,c,l,u=function(t){if(t===s&&g)return g;if(!Q&&t in f)return f[t];switch(t){case et:case nt:case rt:return function(){return new n(this,t)}}return function(){return new n(this)}},d=e+" Iterator",p=!1,f=t.prototype,h=f[tt]||f["@@iterator"]||s&&f[s],g=!Q&&h||u(s),v="Array"==e&&f.entries||h;if(v&&(a=V(v.call(new t)))!==Object.prototype&&a.next&&(V(a)!==J&&(B?B(a,J):K(a[tt])||W(a,tt,st)),q(a,d,!0)),Z&&s==nt&&h&&h.name!==nt&&(z?U(f,"name",nt):(p=!0,g=function(){return M(h,this)})),s)if(c={values:u(nt),keys:o?g:u(et),entries:u(rt)},i)for(l in c)(Q||p||!(l in f))&&W(f,l,c[l]);else D({target:e,proto:!0,forced:Q||p},c);return f[tt]!==g&&W(f,tt,g,{name:s}),H[e]=g,c},dt=function(t,e){return{value:t,done:e}},pt=r.s,ft="Array Iterator",ht=ct.set,gt=ct.getterFor(ft),vt=ut(Array,"Array",(function(t,e){ht(this,{type:ft,target:ot(t),index:0,kind:e})}),(function(){var t=gt(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,dt(void 0,!0)):dt("keys"==n?r:"values"==n?e[r]:[r,e[r]],!1)}),"values"),mt=at.Arguments=at.Array;if(it("keys"),it("values"),it("entries"),pt&&"values"!==mt.name)try{lt(mt,"name",{value:"values"})}catch(Et){}var yt=(0,r.G)("span").classList,bt=yt&&yt.constructor&&yt.constructor.prototype,xt=bt===Object.prototype?void 0:bt,Ot=r.u,At={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},jt=xt,It=vt,Ct=r.y,Pt=r.w,St=Pt("iterator"),Ft=Pt("toStringTag"),Tt=It.values,Rt=function(t,e){if(t){if(t[St]!==Tt)try{Ct(t,St,Tt)}catch(Et){t[St]=Tt}if(t[Ft]||Ct(t,Ft,e),At[e])for(var n in It)if(t[n]!==It[n])try{Ct(t,n,It[n])}catch(Et){t[n]=It[n]}}};for(var kt in At)Rt(Ot[kt]&&Ot[kt].prototype,kt);Rt(jt,"DOMTokenList")}}]);